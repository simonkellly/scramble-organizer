(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}})();const v=document.querySelector("#comp-id"),f=document.querySelector("#passwords"),u=document.querySelector("#sort"),g={"2x2x2":"222","3x3x3":"333","4x4x4":"444","5x5x5":"555","6x6x6":"666","7x7x7":"777","3x3x3 Blindfolded":"333bf","3x3x3 Fewest Moves":"333fm","3x3x3 One-Handed":"333oh",Clock:"clock",Megaminx:"minx",Pyraminx:"pyram",Skewb:"skewb","Square-1":"sq1","4x4x4 Blindfolded":"444bf","5x5x5 Blindfolded":"555bf","3x3x3 Multiple Blindfolded":"333mbf"},p={222:"2x2",333:"3x3",444:"4x4",555:"5x5",666:"6x6",777:"7x7","333bf":"3BLD","333fm":"FMC","333oh":"OH",clock:"Clock",minx:"Mega",pyram:"Pyra",skewb:"Skewb",sq1:"SQ-1","444bf":"4BLD","555bf":"5BLD","333mbf":"MBLD"};function b(n){var e;if(!n||n.length<3)return null;const[r,i]=n.split("-");if(!Object.keys(p).includes(r))return null;const s=(e=parseInt(i.substring(1)))!=null?e:null;return s==null||isNaN(s)?null:{event:r,roundId:s}}function y(n){const r=n.indexOf(" Round");if(r===-1)return;const i=n.substring(0,r),s=n.substring(r+7,r+8),e=g[i],o=p[e],c=parseInt(s);return!e||!o||!c?void 0:{password:o+" R"+n.substring(r+7).replace(" Scramble Set "," ").replace(" Attempt ","-A"),event:e,round:c}}async function w(n){const r=`https://api.codetabs.com/v1/proxy?quest=https://worldcubeassociation.org/api/v0/competitions/${n}/wcif/public`,i=await fetch(r,{});if(!i.ok){console.log(i);return}const s=await i.json();if(!!h(s))return s}function h(n){return!(!n||!n.schedule||!n.events)}async function I(){var a;const n=v.value.replace(/\s/g,""),r=await w(n);if(!r){alert("Error fetching competition details");return}const i=f.value,e=((a=r.schedule.venues)==null?void 0:a.flatMap(t=>t.rooms).flatMap(t=>t.activities)).sort((t,d)=>Date.parse(t.startTime)-Date.parse(d.startTime)).map(t=>b(t.activityCode)).filter(t=>t),c=i.split(`
`).filter(t=>t).map(t=>y(t)).filter(t=>!!t).sort((t,d)=>{const m=e.findIndex(l=>l.event===t.event&&l.roundId===t.round),x=e.findIndex(l=>l.event===d.event&&l.roundId===d.round);return m-x}).map(t=>t.password);f.value=c.join(`\r
`)}u.onclick=async()=>{u.classList.add("loading"),await I(),u.classList.remove("loading")};
