(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();const v=document.querySelector("#comp-id"),f=document.querySelector("#passwords"),u=document.querySelector("#sort"),w={"2x2x2":"222","3x3x3":"333","4x4x4":"444","5x5x5":"555","6x6x6":"666","7x7x7":"777","3x3x3 Blindfolded":"333bf","3x3x3 Fewest Moves":"333fm","3x3x3 One-Handed":"333oh",Clock:"clock",Megaminx:"minx",Pyraminx:"pyram",Skewb:"skewb","Square-1":"sq1","4x4x4 Blindfolded":"444bf","5x5x5 Blindfolded":"555bf","3x3x3 Multiple Blindfolded":"333mbf"},p={222:"2x2",333:"3x3",444:"4x4",555:"5x5",666:"6x6",777:"7x7","333bf":"3BLD","333fm":"FMC","333oh":"OH",clock:"Clock",minx:"Mega",pyram:"Pyra",skewb:"Skewb",sq1:"SQ-1","444bf":"4BLD","555bf":"5BLD","333mbf":"MBLD"};function g(r){var e;if(!r||r.length<3)return null;const[n,s]=r.split("-");if(!Object.keys(p).includes(n))return null;const i=(e=parseInt(s.substring(1)))!=null?e:null;return i==null||isNaN(i)?null:{event:n,roundId:i}}function b(r){const n=r.indexOf(" Round");if(n===-1)return;const s=r.substring(0,n),i=r.substring(n+7,n+8),e=w[s],o=p[e],c=parseInt(i);return!e||!o||!c?void 0:{password:o+" R"+r.substring(n+7).replace(" Scramble Set "," ").replace(" Attempt ","-A"),event:e,round:c}}async function y(r){const n=`https://worldcubeassociation.org/api/v0/competitions/${r}/wcif/public`,s=await fetch(n);return s.ok?await s.json():void 0}async function I(){var a;const r=v.value.replace(/\s/g,""),n=await y(r);if(!n){alert("Error fetching competition details");return}const s=f.value,e=((a=n.schedule.venues)==null?void 0:a.flatMap(t=>t.rooms).flatMap(t=>t.activities)).sort((t,l)=>Date.parse(t.startTime)-Date.parse(l.startTime)).map(t=>g(t.activityCode)).filter(t=>t),c=s.split(`
`).filter(t=>t).map(t=>b(t)).filter(t=>!!t).sort((t,l)=>{const m=e.findIndex(d=>d.event===t.event&&d.roundId===t.round),x=e.findIndex(d=>d.event===l.event&&d.roundId===l.round);return m-x}).map(t=>t.password);f.value=c.join(`\r
`)}u.onclick=async()=>{u.classList.add("loading"),await I(),u.classList.remove("loading")};
